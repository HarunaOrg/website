extends ./includes/blog_layout
include ./mixins/postCard

block content_full
  .blogHeader#blogHeader
    .blogHeader_bg(style="background-image: url(" + config.wallpaper + ");")
      // SEO
      img(src= )
    .blogHeader_userFields
      h1.blogHeader_name
        a(href="/blog").blogHeader_name_link
        | #{config.title}
      h2.blogHeader_job !{config.subtitle}
      h2.blogHeader_job(style="font-size: 1.2em; margin-bottom: 0.5em;") By <strong>#{config.author.name}</strong>

block extraScripts
  script(src="/javascripts/socialSharing.js")

block blog_sidebar
  //- override it

block blog_content
  //- Right Container
  .blogPost.animated.fadeInUp
    if admin
      ul.blog__post__options
        li
          a(href= '/blog/' + post.permalink) See post
        li
          a(href= '/admin/edit/' + post.permalink)
            span.icon.ion-edit
            | Edit post
        li
          a(href= '/admin/delete/' + post.permalink)
            span.icon.ion-android-delete
            | Delete post

      i(style="margin-top: 1.5em; display: block;")= 'postid: ' + post._id + ' | Permalink: ' + post.permalink
      p= 'Views ' + post.views + ' | Likes: ' + post.likes
      hr

    if error
      h1= error

    if post
      .socialSharing#socialSharing
        ul.socialSharing__list
          li.socialSharing__entry
            a(id="tweetShare" href="#" target="_blank")
              span.icon.icon-twitter
          li.socialSharing__entry
            a(id="facebookShare" href="#" target="_blank")
              span.icon.icon-facebook

      h1.blogPost__title= post.title
      h2.blogPost__subtitle= post.summary
      img(src= post.pic, style="width: 100%; margin: 1.5em 0;")
      .blogPost__content !{post.html}

block after_content

  //- This div with ID is used by the Javascript
  //- To know where to hide the sharing pannel.
  #relatedPosts
    if relatedPosts && relatedPosts.length > 0
      .container.blogPostRelated
        .container_inner

          h3.blogPostRelated__title Related posts

          .threeColsGrid
            each post, index in relatedPosts
              if index == 3
                .threeColsGrid__item__full_width
                  .profileData.box_with_shadow(style="margin: 0;")
                    include ./includes/subscriptionBox
              .threeColsGrid__item
                .threeColsGrid__item__wrapper
                  +postCard(post)